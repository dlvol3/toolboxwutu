#!/bin/bash

# === ğŸ’ wutuready: One click python project init ===

# 1. é¡¹ç›®åç§°å‚æ•°
PROJECT_NAME=$1

if [ -z "$PROJECT_NAME" ]; then
  echo "Please name your projectï¼š bash wutuready.sh my-nlp-toolkit"
  exit 1
fi

# 2. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
mkdir -p $PROJECT_NAME/{toolbox,tests,.vscode}

cd $PROJECT_NAME

# 3. åˆå§‹åŒ– README
cat << EOF > README.md
# $PROJECT_NAME

ğŸ‘‹ Welcome to  **$PROJECT_NAME**ï¼
This is a python project stucture generated by wutuready ğŸ±

EOF

# 4. åˆå§‹åŒ– .gitignore
cat << EOF > .gitignore
.venv/
__pycache__/
*.pyc
.DS_Store
.ipynb_checkpoints/
EOF

# 5. åˆ›å»º hello.py
cat << EOF > hello.py
def hello(name):
    print(f"Hello, {name}!")

hello("Ready to go! Start coding here:")
EOF

# 6. toolbox/__init__.py
touch toolbox/__init__.py
cat << EOF > toolbox/model_check.py

EOF

# 7. åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»
python3 -m venv .venv
source .venv/bin/activate

# 8. å®‰è£… black å¹¶ freeze ä¾èµ–
pip install black
pip freeze > requirements.txt

# 9. å†™ VS Code è®¾ç½®
cat << EOF > .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.formatOnSaveMode": "file",
  "python.formatting.provider": "black",
  "python.defaultInterpreterPath": "\${workspaceFolder}/.venv/bin/python",
  "[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter"
  }
}
EOF

# 10. åˆå§‹åŒ– Git ä»“åº“
git init
git add .
git commit -m "ğŸ‰ wutuready: $PROJECT_NAME has been created"

# âœ… å®Œæˆæç¤º
echo "âœ… '$PROJECT_NAME' is now ready to go!"
echo "ğŸ’» Start from the following commands:"
echo ""
echo "    cd $PROJECT_NAME"
echo "    source .venv/bin/activate"
echo "    code ."
